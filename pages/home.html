<!DOCTYPE html>
<html class="dark" lang="fr">

<head>
    <script src="js/app-guard.js"></script>
    <meta charset="utf-8" />
    <meta content="width=device-width,initial-scale=1.0,viewport-fit=cover" name="viewport" />
    <title>SwellSync - Accueil</title>
    <meta property="og:type" content="website">
    <meta property="og:title" content="SwellSync ‚Äî Accueil">
    <meta property="og:description" content="Pr√©visions surf en temps r√©el pour 60+ spots de la c√¥te Atlantique.">
    <meta property="og:image" content="https://swellsync.fr/assets/images/swellsync_logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/assets/images/swellsync_logo.png">
    <script src="js/theme.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script>tailwind.config = { darkMode: "class", theme: { extend: { colors: { "primary": "#00bad6", "background-dark": "#080f1a", "card-dark": "#0f2438" }, fontFamily: { "display": ["Space Grotesk", "sans-serif"] } } } }</script>
    <style>
        .dark body {
            background: #080f1a;
            color: #f1f5f9
        }

        .dark .card {
            background: rgba(15, 36, 56, 0.8);
            border: 1px solid rgba(0, 186, 214, 0.12)
        }

        .dark .hdr {
            background: rgba(8, 15, 26, 0.85);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(0, 186, 214, 0.1)
        }

        .light body {
            background: #f0f6ff;
            color: #1e293b
        }

        .light .card {
            background: #fff;
            border: 1px solid #e2eaf4;
            box-shadow: 0 2px 12px rgba(0, 0, 0, .06)
        }

        .light .hdr {
            background: rgba(240, 246, 255, 0.9);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid #e2eaf4
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            min-height: 100dvh;
            padding-top: env(safe-area-inset-top, 44px)
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none
        }

        .skeleton {
            background: linear-gradient(90deg, rgba(0, 186, 214, .06) 25%, rgba(0, 186, 214, .12) 50%, rgba(0, 186, 214, .06) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.4s infinite
        }

        @keyframes shimmer {
            0% {
                background-position: 200% 0
            }

            100% {
                background-position: -200% 0
            }
        }

        @keyframes pulse-live {

            0%,
            100% {
                opacity: 1
            }

            50% {
                opacity: .4
            }
        }

        .live-dot {
            animation: pulse-live 1.5s ease-in-out infinite
        }

        /* Story ring */
        .story-ring {
            background: conic-gradient(#00bad6, #0077b6, #00bad6);
            padding: 2px;
            border-radius: 50%;
        }

        .story-ring-add {
            background: linear-gradient(135deg, #00bad6, #0077b6);
        }

        .story-ring-seen {
            background: rgba(100, 116, 139, 0.4);
            padding: 2px;
            border-radius: 50%;
        }

        /* Story viewer */
        .story-viewer {
            position: fixed;
            inset: 0;
            z-index: 200;
            background: #000;
            display: none;
            flex-direction: column;
        }

        .story-viewer.open {
            display: flex
        }

        .sv-top-gradient {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 120px;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%);
            z-index: 3;
            pointer-events: none;
        }

        .sv-bottom-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0.7) 0%, transparent 100%);
            z-index: 3;
            pointer-events: none;
        }

        .story-progress {
            display: flex;
            gap: 4px;
            padding: 10px 12px 6px;
            position: relative;
            z-index: 10
        }

        .story-progress .bar {
            flex: 1;
            height: 3px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 3px;
            overflow: hidden
        }

        .story-progress .bar .fill {
            height: 100%;
            background: #fff;
            width: 0%;
            border-radius: 3px
        }

        .story-progress .bar.done .fill {
            width: 100% !important;
            transition: none
        }

        .sv-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 2px 14px 10px;
            position: relative;
            z-index: 10
        }

        .sv-avatar-ring {
            width: 40px;
            height: 40px;
            padding: 2px;
            border-radius: 50%;
            background: conic-gradient(#00bad6, #0077b6, #00bad6)
        }

        .sv-avatar-ring img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #000
        }

        .sv-user-name {
            font-size: 14px;
            font-weight: 800;
            color: #fff;
            letter-spacing: -0.2px
        }

        .sv-user-time {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.45);
            margin-top: 1px
        }

        .sv-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 28px;
            cursor: pointer;
            padding: 4px 2px;
            line-height: 1;
            transition: color .15s
        }

        .sv-close:hover {
            color: #fff
        }

        .story-img {
            flex: 1;
            background-size: cover;
            background-position: center;
            position: relative;
            border-radius: 12px;
            margin: 0 4px
        }

        .sv-caption {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            z-index: 5
        }

        .sv-caption p {
            font-size: 14px;
            color: #fff;
            font-weight: 500;
            text-shadow: 0 2px 8px rgba(0, 0, 0, .7);
            line-height: 1.4
        }

        .sv-bottom {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px 14px;
            position: relative;
            z-index: 10
        }

        .sv-reply {
            flex: 1;
            background: rgba(255, 255, 255, 0.08);
            border: 1.5px solid rgba(255, 255, 255, 0.18);
            border-radius: 22px;
            padding: 10px 16px;
            font-size: 13px;
            color: #fff;
            outline: none;
            font-family: inherit;
            transition: border-color .2s
        }

        .sv-reply:focus {
            border-color: rgba(0, 186, 214, 0.5)
        }

        .sv-reply::placeholder {
            color: rgba(255, 255, 255, 0.35)
        }

        .sv-like-btn {
            background: none;
            border: none;
            font-size: 26px;
            cursor: pointer;
            transition: transform .15s;
            padding: 2px
        }

        .sv-like-btn:active {
            transform: scale(1.3)
        }

        .sv-send {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px
        }

        .story-like-burst {
            position: absolute;
            font-size: 40px;
            animation: likeBurst .9s ease-out forwards;
            pointer-events: none;
            z-index: 10
        }

        @keyframes likeBurst {
            0% {
                transform: scale(0) rotate(-10deg);
                opacity: 1
            }

            40% {
                transform: scale(1.4) rotate(5deg);
                opacity: 1
            }

            100% {
                transform: scale(0.8) translateY(-60px);
                opacity: 0
            }
        }

        /* Tap zones */
        .sv-tap-left,
        .sv-tap-right {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 30%;
            z-index: 4;
            cursor: pointer
        }

        .sv-tap-left {
            left: 0
        }

        .sv-tap-right {
            right: 0
        }

        /* Hero spot card */
        .hero-spot {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            min-height: 260px;
        }

        .hero-spot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(8, 15, 26, 0.2) 0%, rgba(8, 15, 26, 0.85) 70%);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        /* Quick action buttons */
        .quick-btn {
            background: rgba(15, 36, 56, 0.8);
            border: 1px solid rgba(0, 186, 214, 0.15);
            border-radius: 16px;
            padding: 16px 12px;
            text-align: center;
            flex: 1;
            transition: all .15s;
        }

        .quick-btn:active {
            transform: scale(0.95)
        }

        .quick-btn .icon {
            width: 44px;
            height: 44px;
            border-radius: 14px;
            background: rgba(0, 186, 214, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
        }

        .quick-btn .icon .material-symbols-outlined {
            color: #00bad6;
            font-size: 24px
        }

        .quick-btn span:last-child {
            font-size: 11px;
            font-weight: 700;
            color: #94a3b8
        }

        /* Spot carousel card */
        .spot-slide {
            min-width: 170px;
            border-radius: 16px;
            overflow: hidden;
            flex-shrink: 0;
            position: relative;
        }

        .spot-slide img {
            width: 100%;
            height: 180px;
            object-fit: cover
        }

        .spot-slide .label {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, .8));
            padding: 40px 12px 12px;
        }

        /* Community floating button */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 16px;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00bad6, #0077b6);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(0, 186, 214, .35);
            z-index: 40;
            transition: transform .15s;
        }

        .fab:active {
            transform: scale(0.9)
        }
    </style>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#00bad6">
</head>

<body class="font-display pb-24">

    <!-- Header -->
    <header class="hdr sticky top-0 z-30 px-4 py-3">
        <div class="flex items-center gap-3">
            <img src="/assets/images/swellsync_logo.png" alt="SwellSync"
                class="w-8 h-8 rounded-full border border-[#00bad6]/30">
            <h1 class="text-lg font-bold flex-1">Swell<span class="text-[#00bad6]">Sync</span></h1>
            <a href="search.html" class="w-9 h-9 rounded-full bg-white/5 flex items-center justify-center">
                <span class="material-symbols-outlined text-[20px] text-slate-400">search</span>
            </a>
            <a href="notifications.html"
                class="w-9 h-9 rounded-full bg-white/5 flex items-center justify-center relative">
                <span class="material-symbols-outlined text-[20px] text-slate-400">notifications</span>
                <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
            </a>
            <a href="profile.html"
                class="w-9 h-9 rounded-full bg-[#00bad6]/20 flex items-center justify-center border border-[#00bad6]/40">
                <span class="material-symbols-outlined text-[20px] text-[#00bad6]">person</span>
            </a>
        </div>
    </header>

    <main class="px-4 py-3 space-y-5 max-w-lg mx-auto">

        <!-- Stories Row -->
        <div class="flex gap-3 overflow-x-auto no-scrollbar py-1" id="storiesRow">
            <!-- Add Story -->
            <div class="flex flex-col items-center gap-1.5 flex-shrink-0 cursor-pointer"
                onclick="alert('Fonctionnalit√© bient√¥t disponible !')">
                <div class="w-16 h-16 rounded-full story-ring-add flex items-center justify-center">
                    <span class="material-symbols-outlined text-white text-2xl">add</span>
                </div>
                <span class="text-[10px] text-slate-500">Ta story</span>
            </div>
            <!-- Public stories will be injected by JS -->
        </div>

        <!-- Hero: Nearest Spot -->
        <a href="spot_detail.html?id=1" class="hero-spot block active:scale-[.98] transition-transform" id="heroSpot">
            <img src="https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=600&q=80" alt="Spot">
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <!-- Top label -->
                <div class="flex items-center gap-2 mb-auto">
                    <span class="text-[10px] font-bold text-red-400 uppercase tracking-wider">üìç Spot le plus
                        proche</span>
                    <span class="flex items-center gap-1 text-[10px] text-emerald-400 font-bold">
                        <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full live-dot"></span> Live
                    </span>
                </div>

                <!-- Spot info -->
                <div class="mt-auto">
                    <h2 class="text-2xl font-black text-white" id="heroName">La Gravi√®re</h2>
                    <p class="text-sm text-white/60" id="heroLocation">Hossegor, Landes</p>

                    <!-- Wave height bar -->
                    <div class="mt-3 flex items-center gap-3">
                        <div class="h-2 bg-white/20 rounded-full flex-1 overflow-hidden">
                            <div class="h-full bg-white rounded-full transition-all" id="waveBar" style="width:40%">
                            </div>
                        </div>
                        <span class="text-lg font-black text-white" id="heroHeight">‚Äî m</span>
                    </div>

                    <!-- Conditions grid -->
                    <div class="grid grid-cols-2 gap-x-6 gap-y-1.5 mt-3">
                        <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-[16px] text-[#00bad6]">waves</span>
                            <span class="text-xs text-white/70">Houle: <strong class="text-white"
                                    id="heroSwell">‚Äî</strong></span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-[16px] text-[#00bad6]">air</span>
                            <span class="text-xs text-white/70">Vent: <strong class="text-white"
                                    id="heroWind">‚Äî</strong></span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-[16px] text-[#00bad6]">water_drop</span>
                            <span class="text-xs text-white/70">Mar√©e: <strong class="text-[#00bad6]"
                                    id="heroTide">Montante</strong></span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-[16px] text-[#00bad6]">thermostat</span>
                            <span class="text-xs text-white/70">Eau: <strong class="text-white"
                                    id="heroTemp">‚Äî</strong></span>
                        </div>
                    </div>
                </div>
            </div>
        </a>

        <!-- Ad #1 ‚Äî After Hero -->
        <div class="card rounded-2xl p-3 flex items-center gap-3"
            style="border:1px solid rgba(0,186,214,0.06);background:linear-gradient(135deg,#0f2438,#0b1a2e)">
            <div
                style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#00bad6,#6366f1);display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <span class="material-symbols-outlined text-white text-lg"
                    style="font-variation-settings:'FILL' 1">surfing</span>
            </div>
            <div class="flex-1">
                <p class="text-xs font-bold">SwellSync Pro</p>
                <p class="text-[10px] text-slate-500">Passe en Pro pour profiter sans pub</p>
            </div>
            <a href="abonnement.html" class="text-[10px] text-[#00bad6] font-bold">D√©couvrir ‚Üí</a>
            <span class="text-[7px] text-slate-600 absolute top-1 right-2">Sponsoris√©</span>
        </div>

        <!-- Quick Actions -->
        <div class="flex gap-3">
            <a href="map.html" class="quick-btn">
                <div class="icon"><span class="material-symbols-outlined">map</span></div>
                <span>Spot Map</span>
            </a>
            <a href="alerts.html" class="quick-btn">
                <div class="icon"><span class="material-symbols-outlined">calendar_month</span></div>
                <span>7-Day</span>
            </a>
            <a href="alerts.html" class="quick-btn">
                <div class="icon"><span class="material-symbols-outlined">notifications_active</span></div>
                <span>Alertes</span>
            </a>
        </div>

        <!-- Top Spots Today -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">Top spots aujourd'hui</h3>
                <a href="map.html" class="text-xs text-[#00bad6] font-bold">Voir tous</a>
            </div>
            <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2" id="topSpots">
                <div class="spot-slide skeleton" style="min-width:170px;height:220px"></div>
                <div class="spot-slide skeleton" style="min-width:170px;height:220px"></div>
                <div class="spot-slide skeleton" style="min-width:170px;height:220px"></div>
            </div>
        </div>

        <!-- üí® WIND MAP ‚Äî Live Windy Embed -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">üí® Vent en direct</h3>
                <span class="flex items-center gap-1 text-[10px] text-emerald-400 font-bold">
                    <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full live-dot"></span> Live
                </span>
            </div>
            <div class="card rounded-2xl overflow-hidden" style="border:1px solid rgba(0,186,214,0.15)">
                <iframe
                    src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricWind=km/h&zoom=5&overlay=wind&product=ecmwf&level=surface&lat=46.0&lon=-1.5&message=true"
                    style="width:100%;height:220px;border:none;border-radius:14px" loading="lazy" allowfullscreen>
                </iframe>
                <div class="px-3 py-2.5 flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-[#00bad6] text-[16px]">air</span>
                        <span class="text-[11px] text-slate-400">Direction et vitesse du vent ‚Äî France</span>
                    </div>
                    <span class="text-[9px] text-slate-600">Windy.com</span>
                </div>
            </div>
        </div>

        <!-- üèÑ COACHING ‚Äî Paid Plans (Grid) -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">üèÑ Coaching Surf</h3>
                <a href="coaching.html" class="text-xs text-[#00bad6] font-bold">Voir tout ‚Üí</a>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <a href="coaching.html#initiation" class="card rounded-2xl p-4 active:scale-[.97] transition-transform"
                    style="border:1px solid rgba(0,186,214,0.15)">
                    <div class="w-10 h-10 rounded-xl bg-emerald-500/15 flex items-center justify-center mb-2">
                        <span class="material-symbols-outlined text-emerald-400">surfing</span>
                    </div>
                    <p class="font-bold text-sm">Initiation</p>
                    <p class="text-[10px] text-slate-500 mt-0.5">Premi√®re vague</p>
                    <div class="mt-2 flex items-baseline gap-1">
                        <span class="text-lg font-black text-[#00bad6]">79‚Ç¨</span>
                        <span class="text-[9px] text-slate-500">/s√©ance</span>
                    </div>
                </a>
                <a href="coaching.html#perfectionnement"
                    class="card rounded-2xl p-4 active:scale-[.97] transition-transform"
                    style="border:1px solid rgba(245,158,11,0.25);background:linear-gradient(135deg,rgba(245,158,11,.06),rgba(15,36,56,.8))">
                    <div class="w-10 h-10 rounded-xl bg-amber-500/15 flex items-center justify-center mb-2">
                        <span class="material-symbols-outlined text-amber-400"
                            style="font-variation-settings:'FILL' 1">trending_up</span>
                    </div>
                    <p class="font-bold text-sm">Perfection.</p>
                    <p class="text-[10px] text-slate-500 mt-0.5">Techniques avanc√©es</p>
                    <div class="mt-2 flex items-baseline gap-1">
                        <span class="text-lg font-black text-amber-400">119‚Ç¨</span>
                        <span class="text-[9px] text-slate-500">/s√©ance</span>
                    </div>
                    <span
                        class="text-[8px] font-bold bg-amber-400/20 text-amber-400 px-1.5 py-0.5 rounded-full mt-1 inline-block">‚≠ê
                        Populaire</span>
                </a>
                <a href="coaching.html#competition" class="card rounded-2xl p-4 active:scale-[.97] transition-transform"
                    style="border:1px solid rgba(168,85,247,0.25)">
                    <div class="w-10 h-10 rounded-xl bg-purple-500/15 flex items-center justify-center mb-2">
                        <span class="material-symbols-outlined text-purple-400"
                            style="font-variation-settings:'FILL' 1">emoji_events</span>
                    </div>
                    <p class="font-bold text-sm">Comp√©tition</p>
                    <p class="text-[10px] text-slate-500 mt-0.5">Niveau pro</p>
                    <div class="mt-2 flex items-baseline gap-1">
                        <span class="text-lg font-black text-purple-400">179‚Ç¨</span>
                        <span class="text-[9px] text-slate-500">/s√©ance</span>
                    </div>
                </a>
                <a href="coaching.html#video" class="card rounded-2xl p-4 active:scale-[.97] transition-transform"
                    style="border:1px solid rgba(0,186,214,0.2)">
                    <div class="w-10 h-10 rounded-xl bg-[#00bad6]/15 flex items-center justify-center mb-2">
                        <span class="material-symbols-outlined text-[#00bad6]">videocam</span>
                    </div>
                    <p class="font-bold text-sm">Vid√©o Analyse</p>
                    <p class="text-[10px] text-slate-500 mt-0.5">Analyse ta session</p>
                    <div class="mt-2 flex items-baseline gap-1">
                        <span class="text-lg font-black text-[#00bad6]">59‚Ç¨</span>
                        <span class="text-[9px] text-slate-500">/vid√©o</span>
                    </div>
                </a>
            </div>
        </div>

        <!-- Feature Grid: Badges, History, Messages, Support -->
        <div class="grid grid-cols-2 gap-3">
            <a href="badges.html" class="card rounded-2xl p-4 active:scale-[.97] transition-transform">
                <div class="w-10 h-10 rounded-xl bg-amber-500/15 flex items-center justify-center mb-2">
                    <span class="material-symbols-outlined text-amber-400 text-xl"
                        style="font-variation-settings:'FILL' 1">military_tech</span>
                </div>
                <p class="font-bold text-sm">Badges</p>
                <p class="text-[10px] text-slate-500 mt-0.5">Tes troph√©es</p>
            </a>
            <a href="history.html" class="card rounded-2xl p-4 active:scale-[.97] transition-transform">
                <div class="w-10 h-10 rounded-xl bg-purple-500/15 flex items-center justify-center mb-2">
                    <span class="material-symbols-outlined text-purple-400 text-xl">history</span>
                </div>
                <p class="font-bold text-sm">Historique</p>
                <p class="text-[10px] text-slate-500 mt-0.5">Tes sessions</p>
            </a>
            <a href="messages.html" class="card rounded-2xl p-4 active:scale-[.97] transition-transform">
                <div class="w-10 h-10 rounded-xl bg-emerald-500/15 flex items-center justify-center mb-2">
                    <span class="material-symbols-outlined text-emerald-400 text-xl">chat</span>
                </div>
                <p class="font-bold text-sm">Messages</p>
                <p class="text-[10px] text-slate-500 mt-0.5">Discussions</p>
            </a>
            <a href="support.html" class="card rounded-2xl p-4 active:scale-[.97] transition-transform">
                <div class="w-10 h-10 rounded-xl bg-rose-500/15 flex items-center justify-center mb-2">
                    <span class="material-symbols-outlined text-rose-400 text-xl">support_agent</span>
                </div>
                <p class="font-bold text-sm">Support</p>
                <p class="text-[10px] text-slate-500 mt-0.5">Aide & FAQ</p>
            </a>
        </div>

        <!-- Ad #2 ‚Äî Alertes Houle -->
        <div class="card rounded-2xl p-3 flex items-center gap-3 relative"
            style="border:1px solid rgba(0,186,214,0.06);background:linear-gradient(135deg,#0f2438,#0b1a2e)">
            <div
                style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#f59e0b,#ef4444);display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <span class="material-symbols-outlined text-white text-lg"
                    style="font-variation-settings:'FILL' 1">storm</span>
            </div>
            <div class="flex-1">
                <p class="text-xs font-bold">Alertes Houle</p>
                <p class="text-[10px] text-slate-500">Ne rate plus aucune session parfaite</p>
            </div>
            <a href="alerts.html" class="text-[10px] text-[#00bad6] font-bold">Activer ‚Üí</a>
            <span class="text-[7px] text-slate-600 absolute top-1 right-2">Sponsoris√©</span>
        </div>

        <!-- üî• Sessions r√©centes -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">üî• Sessions r√©centes</h3>
                <a href="community.html" class="text-xs text-[#00bad6] font-bold">Voir tout ‚Üí</a>
            </div>
            <div class="space-y-2" id="recentSessions">
                <div class="card rounded-2xl p-3 flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-[#00bad6]/20 flex items-center justify-center flex-shrink-0">
                        <span class="material-symbols-outlined text-[#00bad6] text-lg">surfing</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="font-bold text-sm truncate">Session du jour</p>
                        <p class="text-[10px] text-slate-500">Rejoins la communaut√© pour voir les sessions</p>
                    </div>
                    <span class="material-symbols-outlined text-slate-600">chevron_right</span>
                </div>
            </div>
        </div>

        <!-- Pro Banner -->
        <a href="abonnement.html"
            class="block card rounded-3xl p-5 border-amber-400/30 active:scale-[.98] transition-transform"
            style="background:linear-gradient(135deg,rgba(245,158,11,.1),rgba(217,119,6,.05))">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-2xl bg-amber-400/20 flex items-center justify-center flex-shrink-0">
                    <span class="material-symbols-outlined text-amber-400 text-2xl"
                        style="font-variation-settings:'FILL' 1">star</span>
                </div>
                <div class="flex-1">
                    <p class="font-black text-sm text-amber-300">SwellSync Pro</p>
                    <p class="text-[11px] text-slate-400 mt-0.5">Cam√©ras HD ¬∑ Pr√©visions 15j ¬∑ Favoris illimit√©s</p>
                </div>
                <span class="material-symbols-outlined text-amber-400">chevron_right</span>
            </div>
        </a>

        <!-- üåä WIDGET: Mar√©e Live -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">üåä Mar√©e en direct</h3>
                <span class="flex items-center gap-1 text-[10px] text-emerald-400 font-bold">
                    <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full live-dot"></span> Live
                </span>
            </div>
            <div class="card rounded-2xl p-4" style="border:1px solid rgba(0,186,214,0.15)">
                <div class="flex items-center justify-between mb-3">
                    <div>
                        <p class="text-2xl font-black text-[#00bad6]" id="tideLevelDisplay">3.2m</p>
                        <p class="text-[10px] text-slate-500">Coefficient: <strong class="text-white">78</strong></p>
                    </div>
                    <div class="text-right">
                        <div class="flex items-center gap-1">
                            <span class="material-symbols-outlined text-emerald-400 text-lg">arrow_upward</span>
                            <span class="text-sm font-bold text-emerald-400">Montante</span>
                        </div>
                        <p class="text-[10px] text-slate-500">Pleine mer √† 16h42</p>
                    </div>
                </div>
                <!-- Mini tide chart -->
                <div class="flex items-end gap-1 h-12">
                    <div class="flex-1 bg-[#00bad6]/10 rounded-t" style="height:20%"></div>
                    <div class="flex-1 bg-[#00bad6]/15 rounded-t" style="height:35%"></div>
                    <div class="flex-1 bg-[#00bad6]/20 rounded-t" style="height:55%"></div>
                    <div class="flex-1 bg-[#00bad6]/30 rounded-t" style="height:75%"></div>
                    <div class="flex-1 bg-[#00bad6]/50 rounded-t" style="height:90%"></div>
                    <div class="flex-1 bg-[#00bad6] rounded-t" style="height:100%"></div>
                    <div class="flex-1 bg-[#00bad6]/50 rounded-t" style="height:85%"></div>
                    <div class="flex-1 bg-[#00bad6]/30 rounded-t" style="height:65%"></div>
                    <div class="flex-1 bg-[#00bad6]/20 rounded-t" style="height:45%"></div>
                    <div class="flex-1 bg-[#00bad6]/15 rounded-t" style="height:30%"></div>
                    <div class="flex-1 bg-[#00bad6]/10 rounded-t" style="height:20%"></div>
                    <div class="flex-1 bg-[#00bad6]/15 rounded-t" style="height:40%"></div>
                </div>
                <div class="flex justify-between mt-1">
                    <span class="text-[8px] text-slate-600">00h</span>
                    <span class="text-[8px] text-slate-600">06h</span>
                    <span class="text-[8px] text-[#00bad6] font-bold">Now</span>
                    <span class="text-[8px] text-slate-600">18h</span>
                    <span class="text-[8px] text-slate-600">00h</span>
                </div>
            </div>
        </div>

        <!-- ‚òÄÔ∏è WIDGET: M√©t√©o Surf -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">‚òÄÔ∏è M√©t√©o Surf</h3>
                <span class="text-[10px] text-slate-500">5 jours</span>
            </div>
            <div class="flex gap-2">
                <div class="card rounded-2xl flex-1 py-3 text-center">
                    <p class="text-[9px] text-slate-500">Auj.</p>
                    <p class="text-base mt-1">‚òÄÔ∏è</p>
                    <p class="text-sm font-black mt-1">22¬∞</p>
                    <p class="text-[9px] text-[#00bad6]">1.8m</p>
                </div>
                <div class="card rounded-2xl flex-1 py-3 text-center">
                    <p class="text-[9px] text-slate-500">Ven</p>
                    <p class="text-base mt-1">‚õÖ</p>
                    <p class="text-sm font-black mt-1">19¬∞</p>
                    <p class="text-[9px] text-[#00bad6]">2.1m</p>
                </div>
                <div class="card rounded-2xl flex-1 py-3 text-center">
                    <p class="text-[9px] text-slate-500">Sam</p>
                    <p class="text-base mt-1">üå§Ô∏è</p>
                    <p class="text-sm font-black mt-1">20¬∞</p>
                    <p class="text-[9px] text-emerald-400">2.5m</p>
                </div>
                <div class="card rounded-2xl flex-1 py-3 text-center">
                    <p class="text-[9px] text-slate-500">Dim</p>
                    <p class="text-base mt-1">üåßÔ∏è</p>
                    <p class="text-sm font-black mt-1">17¬∞</p>
                    <p class="text-[9px] text-amber-400">3.0m</p>
                </div>
                <div class="card rounded-2xl flex-1 py-3 text-center">
                    <p class="text-[9px] text-slate-500">Lun</p>
                    <p class="text-base mt-1">‚òÄÔ∏è</p>
                    <p class="text-sm font-black mt-1">21¬∞</p>
                    <p class="text-[9px] text-[#00bad6]">1.5m</p>
                </div>
            </div>
        </div>

        <!-- üìì WIDGET: Journal de Bord -->
        <div>
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-black text-base">üìì Journal de Bord</h3>
                <a href="history.html" class="text-xs text-[#00bad6] font-bold">Voir tout ‚Üí</a>
            </div>
            <div class="card rounded-2xl p-4" style="border:1px solid rgba(0,186,214,0.15)">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-xl bg-[#00bad6]/15 flex items-center justify-center">
                        <span class="material-symbols-outlined text-[#00bad6]">edit_note</span>
                    </div>
                    <div class="flex-1">
                        <p class="font-bold text-sm">Note ta session</p>
                        <p class="text-[10px] text-slate-500">Garde une trace de chaque vague</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <div class="flex-1 text-center py-2 rounded-xl bg-white/5">
                        <p class="text-lg font-black text-[#00bad6]">0</p>
                        <p class="text-[8px] text-slate-500">Sessions</p>
                    </div>
                    <div class="flex-1 text-center py-2 rounded-xl bg-white/5">
                        <p class="text-lg font-black text-amber-400">0h</p>
                        <p class="text-[8px] text-slate-500">Temps √† l'eau</p>
                    </div>
                    <div class="flex-1 text-center py-2 rounded-xl bg-white/5">
                        <p class="text-lg font-black text-emerald-400">0</p>
                        <p class="text-[8px] text-slate-500">Vagues surf√©es</p>
                    </div>
                </div>
                <a href="history.html"
                    class="block mt-3 py-2.5 text-center rounded-xl bg-[#00bad6]/10 text-[#00bad6] font-bold text-xs active:scale-95 transition-transform">
                    + Ajouter une session
                </a>
            </div>
        </div>

        <!-- Ad #3 ‚Äî +200 Spots -->
        <div class="card rounded-2xl p-3 flex items-center gap-3 relative"
            style="border:1px solid rgba(0,186,214,0.06);background:linear-gradient(135deg,#0f2438,#0b1a2e)">
            <div
                style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,#8b5cf6,#6366f1);display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <span class="material-symbols-outlined text-white text-lg"
                    style="font-variation-settings:'FILL' 1">map</span>
            </div>
            <div class="flex-1">
                <p class="text-xs font-bold">+200 Spots</p>
                <p class="text-[10px] text-slate-500">D√©couvre les meilleurs spots de France</p>
            </div>
            <a href="map.html" class="text-[10px] text-[#00bad6] font-bold">Explorer ‚Üí</a>
            <span class="text-[7px] text-slate-600 absolute top-1 right-2">Sponsoris√©</span>
        </div>

    </main>

    <!-- Community FAB -->
    <a href="community.html" class="fab">
        <span class="material-symbols-outlined text-white text-xl"
            style="font-variation-settings:'FILL' 1">groups</span>
    </a>

    <!-- Bottom Nav -->
    <nav class="fixed bottom-0 left-0 right-0 border-t border-[#00bad6]/20 pb-6 pt-2 px-2 flex justify-between items-center z-50 backdrop-blur-lg"
        style="background: var(--nav-bg, rgba(8,15,26,0.95))">
        <a class="flex flex-col items-center gap-1 text-[#00bad6] flex-1" href="home.html">
            <span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1">home</span>
            <span class="text-[10px] font-bold">Home</span>
            <div class="w-1 h-1 bg-[#00bad6] rounded-full mt-0.5"></div>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 flex-1" href="map.html">
            <span class="material-symbols-outlined">travel_explore</span>
            <span class="text-[10px]">Spots</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 flex-1" href="alerts.html">
            <span style="position:relative;display:inline-block;">
                <span class="material-symbols-outlined">notifications</span>
                <span
                    style="position:absolute;top:-1px;left:-3px;font-size:8px;line-height:1;z-index:2;display:inline-flex;align-items:center;justify-content:center;background:#f59e0b;border-radius:50%;width:11px;height:11px;font-weight:900;color:#080f1a;">‚≠ê</span>
            </span>
            <span class="text-[10px]">Alertes</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 flex-1" href="community.html">
            <span class="material-symbols-outlined">groups</span>
            <span class="text-[10px]">Communaut√©</span>
        </a>
        <a class="flex flex-col items-center gap-1 text-slate-500 flex-1" href="profile.html">
            <span class="material-symbols-outlined">person</span>
            <span class="text-[10px]">Profil</span>
        </a>
    </nav>

    <!-- STORY VIEWER (fullscreen) -->
    <div class="story-viewer" id="storyViewer">
        <!-- Gradient overlays -->
        <div class="sv-top-gradient"></div>
        <div class="sv-bottom-gradient"></div>
        <!-- Progress bars -->
        <div class="story-progress" id="storyProgressBars"></div>
        <!-- Header -->
        <div class="sv-header">
            <div class="sv-avatar-ring">
                <img id="svAvatar" src="">
            </div>
            <div style="flex:1">
                <p class="sv-user-name" id="svName"></p>
                <p class="sv-user-time" id="svTime"></p>
            </div>
            <button class="sv-close" onclick="closeStory()">‚úï</button>
        </div>
        <!-- Story image -->
        <div class="story-img" id="storyImage" ondblclick="likeStory(event)">
            <div class="sv-tap-left" onclick="prevSlide()"></div>
            <div class="sv-tap-right" onclick="nextSlide()"></div>
            <div class="sv-caption" id="svCaption">
                <p></p>
            </div>
        </div>
        <!-- Bottom: like + reply -->
        <div class="sv-bottom">
            <input class="sv-reply" id="svReply" type="text" placeholder="Envoyer un message..."
                onkeydown="if(event.key==='Enter')sendReply()">
            <button class="sv-like-btn" id="svLikeBtn" onclick="toggleLike()" title="J'aime">ü§ç</button>
            <button class="sv-send" onclick="sendReply()">
                <span class="material-symbols-outlined" style="color:#00bad6;font-size:24px">send</span>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="js/api.js"></script>

    <!-- Stories System -->
    <script>
        const PUBLIC_STORIES = [
            { id: 1, user: 'L√©o_Surf', avatar: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&q=80', time: 'il y a 2h', caption: 'Session incroyable ce matin √† La Gravi√®re üî•üåä', images: ['https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=600&q=80', 'https://images.unsplash.com/photo-1455729552457-5c322b29c789?w=600&q=80'] },
            { id: 2, user: 'MarineSurf', avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&q=80', time: 'il y a 3h', caption: 'Sunset session √† Biarritz üåÖ', images: ['https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&q=80', 'https://images.unsplash.com/photo-1476673160081-cf065607f449?w=600&q=80'] },
            { id: 3, user: 'TomWaves', avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&q=80', time: 'il y a 4h', caption: 'Premier tube de ma vie !!! ü§ôüíÄ', images: ['https://images.unsplash.com/photo-1505459668311-8dfac7952bf0?w=600&q=80'] },
            { id: 4, user: 'OceanVibes', avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&q=80', time: 'il y a 5h', caption: 'La Torche est magique aujourd\'hui ‚ú®', images: ['https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=600&q=80', 'https://images.unsplash.com/photo-1484291470158-b8f8d608850d?w=600&q=80'] },
            { id: 5, user: 'SurfCoach64', avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&q=80', time: 'il y a 6h', caption: 'Conseil du jour: toujours regarder o√π tu veux aller üèÑ', images: ['https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=600&q=80'] },
            { id: 6, user: 'WaveRider', avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&q=80', time: 'il y a 8h', caption: 'Hossegor bombing ! üí£üåä', images: ['https://images.unsplash.com/photo-1416163785019-75f3889c56b0?w=600&q=80', 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=600&q=80'] },
            { id: 7, user: 'SaltyGirl', avatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&q=80', time: 'il y a 10h', caption: 'Dawn patrol üåÖ R√©veil 5h30 mais √ßa valait le coup', images: ['https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=600&q=80'] },
            { id: 8, user: 'AtlanticPro', avatar: 'https://images.unsplash.com/photo-1463453091185-61582044d556?w=100&q=80', time: 'il y a 12h', caption: 'Conditions parfaites 5/5 üèÜ', images: ['https://images.unsplash.com/photo-1437719417032-8b217f069f31?w=600&q=80', 'https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=600&q=80'] }
        ];

        let currentStory = 0, currentSlide = 0, storyTimer = null, liked = {};
        const seenStories = new Set();

        // Render story circles
        function renderStories() {
            const row = document.getElementById('storiesRow');
            PUBLIC_STORIES.forEach((s, i) => {
                const seen = seenStories.has(s.id);
                const div = document.createElement('div');
                div.className = 'flex flex-col items-center gap-1.5 flex-shrink-0 cursor-pointer';
                div.onclick = () => openStory(i);
                div.innerHTML = `
                <div class="${seen ? 'story-ring-seen' : 'story-ring'}" style="width:64px;height:64px;padding:2px">
                    <img src="${s.avatar}" style="width:100%;height:100%;border-radius:50%;object-fit:cover;border:2px solid #080f1a">
                </div>
                <span class="text-[10px] ${seen ? 'text-slate-600' : 'text-slate-400'}" style="max-width:64px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${s.user}</span>`;
                row.appendChild(div);
            });
        }

        function openStory(index) {
            currentStory = index;
            currentSlide = 0;
            liked[PUBLIC_STORIES[index].id] = liked[PUBLIC_STORIES[index].id] || false;
            showStory();
            document.getElementById('storyViewer').classList.add('open');
        }

        function closeStory() {
            document.getElementById('storyViewer').classList.remove('open');
            clearTimeout(storyTimer);
            renderStoriesUpdate();
        }

        function showStory() {
            const s = PUBLIC_STORIES[currentStory];
            if (!s) { closeStory(); return; }
            seenStories.add(s.id);

            document.getElementById('svAvatar').src = s.avatar;
            document.getElementById('svName').textContent = s.user;
            document.getElementById('svTime').textContent = s.time;
            document.getElementById('storyImage').style.backgroundImage = `url(${s.images[currentSlide]})`;
            document.getElementById('svCaption').querySelector('p').textContent = s.caption;
            document.getElementById('svLikeBtn').textContent = liked[s.id] ? '‚ù§Ô∏è' : 'ü§ç';

            // Progress bars
            const barsHtml = s.images.map((_, i) =>
                `<div class="bar ${i < currentSlide ? 'done' : ''}"><div class="fill" id="pbar${i}"></div></div>`
            ).join('');
            document.getElementById('storyProgressBars').innerHTML = barsHtml;

            // Animate current bar
            clearTimeout(storyTimer);
            setTimeout(() => {
                const bar = document.getElementById('pbar' + currentSlide);
                if (bar) { bar.style.transition = 'width 5s linear'; bar.style.width = '100%'; }
            }, 50);

            storyTimer = setTimeout(() => nextSlide(), 5100);
        }

        function nextSlide() {
            clearTimeout(storyTimer);
            const s = PUBLIC_STORIES[currentStory];
            if (currentSlide < s.images.length - 1) {
                currentSlide++;
                showStory();
            } else {
                // Next user story
                if (currentStory < PUBLIC_STORIES.length - 1) {
                    currentStory++;
                    currentSlide = 0;
                    showStory();
                } else { closeStory(); }
            }
        }

        function prevSlide() {
            clearTimeout(storyTimer);
            if (currentSlide > 0) { currentSlide--; showStory(); }
            else if (currentStory > 0) {
                currentStory--;
                currentSlide = 0;
                showStory();
            }
        }

        function toggleLike() {
            const s = PUBLIC_STORIES[currentStory];
            liked[s.id] = !liked[s.id];
            document.getElementById('svLikeBtn').textContent = liked[s.id] ? '‚ù§Ô∏è' : 'ü§ç';
            document.getElementById('svLikeBtn').style.transform = 'scale(1.3)';
            setTimeout(() => document.getElementById('svLikeBtn').style.transform = 'scale(1)', 200);
        }

        function likeStory(e) {
            const s = PUBLIC_STORIES[currentStory];
            liked[s.id] = true;
            document.getElementById('svLikeBtn').textContent = '‚ù§Ô∏è';
            // Burst heart
            const heart = document.createElement('div');
            heart.className = 'story-like-burst';
            heart.textContent = '‚ù§Ô∏è';
            heart.style.left = (e.offsetX - 15) + 'px';
            heart.style.top = (e.offsetY - 15) + 'px';
            document.getElementById('storyImage').appendChild(heart);
            setTimeout(() => heart.remove(), 900);
        }

        function sendReply() {
            const input = document.getElementById('svReply');
            if (input.value.trim()) {
                input.value = '';
                // Toast
                const t = document.createElement('div');
                t.style.cssText = 'position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:300;background:#00bad6;color:#080f1a;font-weight:700;font-size:12px;padding:8px 16px;border-radius:20px;';
                t.textContent = 'Message envoy√© !';
                document.body.appendChild(t);
                setTimeout(() => t.remove(), 2000);
            }
        }

        function renderStoriesUpdate() {
            // Update rings for seen stories
            const row = document.getElementById('storiesRow');
            const circles = row.querySelectorAll('[class*="story-ring"]');
            // Skip first (add story button)
        }

        renderStories();
    </script>
    <script>
        const SPOT_IMAGES = [
            'https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=600&q=80',
            'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&q=80',
            'https://images.unsplash.com/photo-1505459668311-8dfac7952bf0?w=600&q=80',
            'https://images.unsplash.com/photo-1455729552457-5c322b29c789?w=600&q=80',
            'https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=600&q=80',
            'https://images.unsplash.com/photo-1484291470158-b8f8d608850d?w=600&q=80',
            'https://images.unsplash.com/photo-1509914398892-963f53e6e2f1?w=600&q=80',
            'https://images.unsplash.com/photo-1416163785019-75f3889c56b0?w=600&q=80',
            'https://images.unsplash.com/photo-1476673160081-cf065607f449?w=600&q=80',
            'https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=600&q=80',
            'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=600&q=80',
            'https://images.unsplash.com/photo-1437719417032-8b217f069f31?w=600&q=80'
        ];
        function getSpotImg(spot) {
            if (!spot) return SPOT_IMAGES[0];
            const hash = ((spot.id || 0) * 2654435761) >>> 0;
            return SPOT_IMAGES[hash % SPOT_IMAGES.length];
        }

        const DIFF_LABELS = { debutant: 'üåä D√©butant', intermediaire: '‚ö° Interm√©diaire', avance: 'üî• Avanc√©', expert: 'üíÄ Expert' };
        const DIFF_COLORS = { debutant: 'bg-emerald-500/80', intermediaire: 'bg-yellow-500/80', avance: 'bg-orange-500/80', expert: 'bg-red-500/80' };

        async function init() {
            try {
                const spots = await API.spots.list();

                // Hero spot (first/nearest)
                if (spots.length) {
                    const hero = spots[0];
                    document.getElementById('heroName').textContent = hero.name;
                    document.getElementById('heroLocation').textContent = hero.location;
                    document.getElementById('heroSpot').href = 'spot_detail.html?id=' + hero.id;

                    // Simulated live conditions
                    const h = (1.0 + Math.abs(Math.sin(hero.id * 7)) * 2.5).toFixed(1);
                    document.getElementById('heroHeight').textContent = h + ' m';
                    document.getElementById('heroSwell').textContent = h + 'm ' + ['NW', 'W', 'SW', 'N'][hero.id % 4];
                    document.getElementById('heroWind').textContent = (5 + (hero.id * 3) % 20) + ' km/h';
                    document.getElementById('heroTemp').textContent = (14 + hero.id % 6) + '¬∞C';
                    const tides = ['Montante', 'Descendante', 'Haute', 'Basse', '√âtale'];
                    document.getElementById('heroTide').textContent = tides[hero.id % tides.length];
                    document.getElementById('waveBar').style.width = Math.min(95, (h / 3) * 100) + '%';

                    // Hero image
                    const heroImg = document.querySelector('.hero-spot img');
                    heroImg.src = getSpotImg(hero);
                }

                // Top spots carousel
                const top = spots.slice(0, 8);
                let carouselHtml = '';
                top.forEach((s, i) => {
                    const diff = (s.difficulty || 'intermediaire').toLowerCase();
                    const label = DIFF_LABELS[diff] || diff;
                    const color = DIFF_COLORS[diff] || 'bg-slate-600/80';
                    carouselHtml += `
                    <a href="spot_detail.html?id=${s.id}" class="spot-slide card active:scale-[.97] transition-transform">
                        <img src="${getSpotImg(s)}" alt="${s.name}" loading="lazy">
                        <div class="label">
                            <span class="inline-block text-[10px] font-bold text-white px-2 py-0.5 rounded-full ${color} mb-1.5">${label}</span>
                            <p class="text-white font-bold text-sm truncate">${s.name}</p>
                            <p class="text-white/50 text-[10px] truncate">${s.location}</p>
                        </div>
                    </a>`;
                });
                document.getElementById('topSpots').innerHTML = carouselHtml;

            } catch (e) {
                console.error('Init error:', e);
                document.getElementById('topSpots').innerHTML = '<p class="text-slate-500 text-xs py-4">Connexion au serveur‚Ä¶</p>';
            }
        }

        init();
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(() => { });
        }
    </script>
    <script src="js/adsense.js"></script>
    <script src="js/ui-components.js"></script>
    <script src="js/notif-badge.js"></script>
    <script src="/js/i18n.js"></script>
</body>

</html>